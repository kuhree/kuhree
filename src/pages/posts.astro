---
import { getCollection } from 'astro:content'

import BaseLayout from '../layouts/Default.astro'

import ContentPreview from '../components/ContentPreview.astro'
import Hero from '../components/ui/Hero.astro'
import Grid from '../components/ui/Grid.astro'
import { SITE } from '../config'
import { sortContent } from '../lib/content'

const siteOwnerName = SITE.owner.name,
  pageTitle = 'All Posts',
  pageDescription = 'Snippets, rants, and the occasional coherent thought.'

const allPosts = await getCollection('posts'),
  sortedPosts = sortContent(allPosts)
---

<BaseLayout
  title={`${pageTitle} | ${siteOwnerName}`}
  description={pageDescription}
>
  <main class='flex flex-col gap-8 max-w-3xl mx-auto px-4'>
    <Hero title={pageTitle} tagline={pageDescription} align='start' />

    <Grid variant='offset'>
      {
        sortedPosts.map((entry) => (
          <li>
            <ContentPreview entry={entry} />
          </li>
        ))
      }
    </Grid>
  </main>
</BaseLayout>
